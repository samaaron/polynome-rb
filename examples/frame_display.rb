require File.dirname(__FILE__) + '/../lib/polynome'
include Polynome


#pop in the correct io_file location (have a look in /dev for
#something similar)
m = Polynome::Monome.new(:io_file => '/dev/tty.usbserial-m128-115', :model => "128")
#m = Polynome::Monome.new(:io_file => '/dev/tty.usbserial-m256-203', :model => "256")

t1 = Thread.new do

  a = Frame.new("1111111111111111111111111111111111111111111111111111111111111111")
  n = Frame.new("0000000000000000000000000000000000000000000000000000000000000000")
  frames = [

            Frame.new("0111111111111111111111111111111111111111111111111111111111111111"),
            Frame.new("1011111111111111111111111111111111111111111111111111111111111111"),
            Frame.new("1101111111111111111111111111111111111111111111111111111111111111"),
            Frame.new("1110111111111111111111111111111111111111111111111111111111111111"),
            Frame.new("1111011111111111111111111111111111111111111111111111111111111111"),
            Frame.new("1111101111111111111111111111111111111111111111111111111111111111"),
            Frame.new("1111110111111111111111111111111111111111111111111111111111111111"),
            Frame.new("1111111011111111111111111111111111111111111111111111111111111111"),
            Frame.new("1111111101111111111111111111111111111111111111111111111111111111"),
            Frame.new("1111111110111111111111111111111111111111111111111111111111111111"),
            Frame.new("1111111111011111111111111111111111111111111111111111111111111111"),
            Frame.new("1111111111101111111111111111111111111111111111111111111111111111"),
            Frame.new("1111111111110111111111111111111111111111111111111111111111111111"),
            Frame.new("1111111111111011111111111111111111111111111111111111111111111111"),
            Frame.new("1111111111111101111111111111111111111111111111111111111111111111"),
            Frame.new("1111111111111110111111111111111111111111111111111111111111111111"),
            Frame.new("1111111111111111011111111111111111111111111111111111111111111111"),
            Frame.new("1111111111111111101111111111111111111111111111111111111111111111"),
            Frame.new("1111111111111111110111111111111111111111111111111111111111111111"),
            Frame.new("1111111111111111111011111111111111111111111111111111111111111111"),
            Frame.new("1111111111111111111101111111111111111111111111111111111111111111"),
            Frame.new("1111111111111111111110111111111111111111111111111111111111111111"),
            Frame.new("1111111111111111111111011111111111111111111111111111111111111111"),
            Frame.new("1111111111111111111111101111111111111111111111111111111111111111"),
            Frame.new("1111111111111111111111110111111111111111111111111111111111111111"),
            Frame.new("1111111111111111111111111011111111111111111111111111111111111111"),
            Frame.new("1111111111111111111111111101111111111111111111111111111111111111"),
            Frame.new("1111111111111111111111111110111111111111111111111111111111111111"),
            Frame.new("1111111111111111111111111111011111111111111111111111111111111111"),
            Frame.new("1111111111111111111111111111101111111111111111111111111111111111"),
            Frame.new("1111111111111111111111111111110111111111111111111111111111111111"),
            Frame.new("1111111111111111111111111111111011111111111111111111111111111111"),
            Frame.new("1111111111111111111111111111111101111111111111111111111111111111"),
            Frame.new("1111111111111111111111111111111110111111111111111111111111111111"),
            Frame.new("1111111111111111111111111111111111011111111111111111111111111111"),
            Frame.new("1111111111111111111111111111111111101111111111111111111111111111"),
            Frame.new("1111111111111111111111111111111111110111111111111111111111111111"),
            Frame.new("1111111111111111111111111111111111111011111111111111111111111111"),
            Frame.new("1111111111111111111111111111111111111101111111111111111111111111"),
            Frame.new("1111111111111111111111111111111111111110111111111111111111111111"),
            Frame.new("1111111111111111111111111111111111111111011111111111111111111111"),
            Frame.new("1111111111111111111111111111111111111111101111111111111111111111"),
            Frame.new("1111111111111111111111111111111111111111110111111111111111111111"),
            Frame.new("1111111111111111111111111111111111111111111011111111111111111111"),
            Frame.new("1111111111111111111111111111111111111111111101111111111111111111"),
            Frame.new("1111111111111111111111111111111111111111111110111111111111111111"),
            Frame.new("1111111111111111111111111111111111111111111111011111111111111111"),
            Frame.new("1111111111111111111111111111111111111111111111101111111111111111"),
            Frame.new("1111111111111111111111111111111111111111111111110111111111111111"),
            Frame.new("1111111111111111111111111111111111111111111111111011111111111111"),
            Frame.new("1111111111111111111111111111111111111111111111111101111111111111"),
            Frame.new("1111111111111111111111111111111111111111111111111110111111111111"),
            Frame.new("1111111111111111111111111111111111111111111111111111011111111111"),
            Frame.new("1111111111111111111111111111111111111111111111111111101111111111"),
            Frame.new("1111111111111111111111111111111111111111111111111111110111111111"),
            Frame.new("1111111111111111111111111111111111111111111111111111111011111111"),
            Frame.new("1111111111111111111111111111111111111111111111111111111101111111"),
            Frame.new("1111111111111111111111111111111111111111111111111111111110111111"),
            Frame.new("1111111111111111111111111111111111111111111111111111111111011111"),
            Frame.new("1111111111111111111111111111111111111111111111111111111111101111"),
            Frame.new("1111111111111111111111111111111111111111111111111111111111110111"),
            Frame.new("1111111111111111111111111111111111111111111111111111111111111011"),
            Frame.new("1111111111111111111111111111111111111111111111111111111111111101"),
            Frame.new("1111111111111111111111111111111111111111111111111111111111111110")
           ]

  inverted_frames = [
                     Frame.new("0111111111111111111111111111111111111111111111111111111111111111").invert!,
                     Frame.new("1011111111111111111111111111111111111111111111111111111111111111").invert!,
                     Frame.new("1101111111111111111111111111111111111111111111111111111111111111").invert!,
                     Frame.new("1110111111111111111111111111111111111111111111111111111111111111").invert!,
                     Frame.new("1111011111111111111111111111111111111111111111111111111111111111").invert!,
                     Frame.new("1111101111111111111111111111111111111111111111111111111111111111").invert!,
                     Frame.new("1111110111111111111111111111111111111111111111111111111111111111").invert!,
                     Frame.new("1111111011111111111111111111111111111111111111111111111111111111").invert!,
                     Frame.new("1111111101111111111111111111111111111111111111111111111111111111").invert!,
                     Frame.new("1111111110111111111111111111111111111111111111111111111111111111").invert!,
                     Frame.new("1111111111011111111111111111111111111111111111111111111111111111").invert!,
                     Frame.new("1111111111101111111111111111111111111111111111111111111111111111").invert!,
                     Frame.new("1111111111110111111111111111111111111111111111111111111111111111").invert!,
                     Frame.new("1111111111111011111111111111111111111111111111111111111111111111").invert!,
                     Frame.new("1111111111111101111111111111111111111111111111111111111111111111").invert!,
                     Frame.new("1111111111111110111111111111111111111111111111111111111111111111").invert!,
                     Frame.new("1111111111111111011111111111111111111111111111111111111111111111").invert!,
                     Frame.new("1111111111111111101111111111111111111111111111111111111111111111").invert!,
                     Frame.new("1111111111111111110111111111111111111111111111111111111111111111").invert!,
                     Frame.new("1111111111111111111011111111111111111111111111111111111111111111").invert!,
                     Frame.new("1111111111111111111101111111111111111111111111111111111111111111").invert!,
                     Frame.new("1111111111111111111110111111111111111111111111111111111111111111").invert!,
                     Frame.new("1111111111111111111111011111111111111111111111111111111111111111").invert!,
                     Frame.new("1111111111111111111111101111111111111111111111111111111111111111").invert!,
                     Frame.new("1111111111111111111111110111111111111111111111111111111111111111").invert!,
                     Frame.new("1111111111111111111111111011111111111111111111111111111111111111").invert!,
                     Frame.new("1111111111111111111111111101111111111111111111111111111111111111").invert!,
                     Frame.new("1111111111111111111111111110111111111111111111111111111111111111").invert!,
                     Frame.new("1111111111111111111111111111011111111111111111111111111111111111").invert!,
                     Frame.new("1111111111111111111111111111101111111111111111111111111111111111").invert!,
                     Frame.new("1111111111111111111111111111110111111111111111111111111111111111").invert!,
                     Frame.new("1111111111111111111111111111111011111111111111111111111111111111").invert!,
                     Frame.new("1111111111111111111111111111111101111111111111111111111111111111").invert!,
                     Frame.new("1111111111111111111111111111111110111111111111111111111111111111").invert!,
                     Frame.new("1111111111111111111111111111111111011111111111111111111111111111").invert!,
                     Frame.new("1111111111111111111111111111111111101111111111111111111111111111").invert!,
                     Frame.new("1111111111111111111111111111111111110111111111111111111111111111").invert!,
                     Frame.new("1111111111111111111111111111111111111011111111111111111111111111").invert!,
                     Frame.new("1111111111111111111111111111111111111101111111111111111111111111").invert!,
                     Frame.new("1111111111111111111111111111111111111110111111111111111111111111").invert!,
                     Frame.new("1111111111111111111111111111111111111111011111111111111111111111").invert!,
                     Frame.new("1111111111111111111111111111111111111111101111111111111111111111").invert!,
                     Frame.new("1111111111111111111111111111111111111111110111111111111111111111").invert!,
                     Frame.new("1111111111111111111111111111111111111111111011111111111111111111").invert!,
                     Frame.new("1111111111111111111111111111111111111111111101111111111111111111").invert!,
                     Frame.new("1111111111111111111111111111111111111111111110111111111111111111").invert!,
                     Frame.new("1111111111111111111111111111111111111111111111011111111111111111").invert!,
                     Frame.new("1111111111111111111111111111111111111111111111101111111111111111").invert!,
                     Frame.new("1111111111111111111111111111111111111111111111110111111111111111").invert!,
                     Frame.new("1111111111111111111111111111111111111111111111111011111111111111").invert!,
                     Frame.new("1111111111111111111111111111111111111111111111111101111111111111").invert!,
                     Frame.new("1111111111111111111111111111111111111111111111111110111111111111").invert!,
                     Frame.new("1111111111111111111111111111111111111111111111111111011111111111").invert!,
                     Frame.new("1111111111111111111111111111111111111111111111111111101111111111").invert!,
                     Frame.new("1111111111111111111111111111111111111111111111111111110111111111").invert!,
                     Frame.new("1111111111111111111111111111111111111111111111111111111011111111").invert!,
                     Frame.new("1111111111111111111111111111111111111111111111111111111101111111").invert!,
                     Frame.new("1111111111111111111111111111111111111111111111111111111110111111").invert!,
                     Frame.new("1111111111111111111111111111111111111111111111111111111111011111").invert!,
                     Frame.new("1111111111111111111111111111111111111111111111111111111111101111").invert!,
                     Frame.new("1111111111111111111111111111111111111111111111111111111111110111").invert!,
                     Frame.new("1111111111111111111111111111111111111111111111111111111111111011").invert!,
                     Frame.new("1111111111111111111111111111111111111111111111111111111111111101").invert!,
                     Frame.new("1111111111111111111111111111111111111111111111111111111111111110").invert!
                    ]

  #comment or uncomment this line to invert
  frames = inverted_frames

  loop do
    frames.size.times do |i|
      ##if it's a 256:
      #m.current_surface.update_frame_buffer(frames[i], frames[i], frames[ -i], frames[- i])

      #if it's a 128
      m.current_surface.update_frame_buffer(frames[i], frames[- i])
      sleep 0.1
    end

  end
end

m.run_display
t1.join
m.t2.join
